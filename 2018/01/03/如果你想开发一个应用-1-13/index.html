<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/niu.png"/>
	 <link rel="shortcut icon" href="/img/niu.png">
	
			
    <title>
    双鱼座的牛
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">双鱼座的牛</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/前端技术/">前端技术</a></li><li><a class="category-link" href="/categories/后端技术/">后端技术</a></li><li><a class="category-link" href="/categories/闲言碎语/">闲言碎语</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/miccall" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		            
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(http://upload-images.jianshu.io/upload_images/6290181-10ba70196a7b4c33.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >如果你想开发一个应用(1-13)</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <p>###大家新年快乐 2018事事顺利###</p>
<p>##前端技术选型##</p>
<blockquote>
<p>因为作为一个后端开发人员，前端都是摸索着前进，所以会写的比较简单。</p>
</blockquote>
<p>###选型第一步<br>做出原型图后，就要像用什么技术来实现这个App了，最理想的方式当然是原生的Android或者IOS了，但这两个首先就被pass掉了，因为：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6290181-bac29097cff37931.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>对于一个开发者来说，同时开发两个客户端实在是太难了，所以，最终选择还是使用js进行开发，然后用cordova技术包装成App文件。</p>
<p>###选型第二步</p>
<p>既然确定了使用js进行开发，接下来就是js框架的选择了，摆在前面的同样有很多选型，JQuery，react，ng，vue等，最终我选择了vue进行开发，原因么，也很简单：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6290181-bac29097cff37931.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>扣除jquery之后，也只有vue的曲线最平了。并且作为国人开发的框架，目前资料也很多，还大部分都是中文的，甚至在知乎，微博上能和开发者用中文对话，还有比这个更幸福的事情么？</p>
<h2 id="脚手架"><a href="#脚手架" class="headerlink" title="脚手架"></a>脚手架</h2><ol>
<li>要进行开发，首先需要安装 <a href="https://nodejs.org/en/" target="_blank" rel="external">node.js</a>,安装方式不再展开。</li>
<li>安装npm</li>
<li>安装脚手架 vue-cli <code>npm install -g vue-cli</code> 完成后输入vue，显示vue信息表示安装成功</li>
<li>创建文件夹进入后，输入<code>vue init webpack jtodos</code> 然后进入等待，完成后则表示安装成功。</li>
<li>进入项目：<code>cd jtodos</code> 注意，这里的jtodos均指的是vue项目，不要与java项目混淆。</li>
<li>安装依赖 <code>npm i</code> 再次进入等待</li>
<li>安装完成后，继续输入<code>npm run dev</code> </li>
<li>待提示运行成功后，在浏览器输入localhost:8080 这时候应出现如下画面：</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/6290181-9dc30ef5cffe84d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>至此，一个vue的项目已经搭建完成。基本的目录结构如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6290181-32cfb48969c3fb75.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>而我们的开发，主要就在src目录中进行。</p>
<h2 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h2><p>作为一个前端渣来说，从头到尾都是自己写样式，写js的画，实在是有些强人所难。所以，选择一个UI框架是必不可少。</p>
<p>虽然vue是与view松耦合的，可以支持任何ui框架，但是选择一个vue相关的ui框架还是能节约自己不少的精力，经过筛选，最终我选择了<a href="http://www.muse-ui.org/#/index" target="_blank" rel="external">MuseUi</a></p>
<p>MuseUi主要特点如下(摘自<a href="https://segmentfault.com/a/1190000007471546" target="_blank" rel="external">主页</a>):</p>
<ul>
<li>基于 vue2.0 开发</li>
<li>组件丰富</li>
<li>丰富的主题，支持自定义主题</li>
<li>可以很好的配合 vue 的其它插件vue-router , vue-validator 使用</li>
<li>友好的 API</li>
</ul>
<p>安装方式为为敲入：</p>
<pre><code>npm install muse-ui --save
</code></pre><p>然后在main.js内引入框架：</p>
<pre><code>import MuseUI from &apos;muse-ui&apos;
import &apos;muse-ui/dist/muse-ui.css&apos;
Vue.use(MuseUI)
</code></pre><p>至此，UI框架引入完成。</p>
<h2 id="router"><a href="#router" class="headerlink" title="router"></a>router</h2><p>在一个应用中，哪怕是单页应用，也不可避免的牵扯到页面切换。如果全部用硬编码的方式切换的画，即累有容易出错，所以引入一个路由管理的框架不可避免，在vue上也没有什么好选择的，基本上都会使用vue-router，首先进行安装：</p>
<pre><code>npm install vue-router --save
</code></pre><p>然后同样需要在main.js里进行配置：</p>
<pre><code>import Router from &apos;vue-router&apos;
import router from &apos;./router&apos; //这里是router的配置

Vue.use(Router)
</code></pre><p>最终，还要在vue里载入：</p>
<pre><code>new Vue({
  el: &apos;#app&apos;,
  router,
  template: &apos;&lt;App/&gt;&apos;,
  components: { App }
})
</code></pre><p>至此，vue-router在main的部分配置完成，然后贴上router/index.js中的代码：</p>
<pre><code>import Vue from &apos;vue&apos;
import Router from &apos;vue-router&apos;
import Index from &apos;@/views/Index.vue&apos;

export default new Router({
    mode: &apos;history&apos;,
    routes: [
        {
            path: &apos;/&apos;,
            name: &apos;Index&apos;,
            component: Index
        }
    ]
})
</code></pre><p>这里主要对路由进行注册，注册完成之后，就可以使用name来对应不同的组件进行路由切换。</p>
<h2 id="交互"><a href="#交互" class="headerlink" title="交互"></a>交互</h2><p>一个不与服务端交互的app，不是一个好app—-阿基米德</p>
<p>不管他有没有说过这句话，目前纯单机的app可以说基本上是没有，尤其是我们现在要制作的这个app，每个todo项更要在云端进行保存，所以与服务端的交互是必不可少的。这时候有一个网络的框架肯定是必须的了，由于尤达(vue的作者)都宣布不再更新vue-resource，而推荐使用axios，那么我也就不费心选择了，直接使用axios。</p>
<p>安装：</p>
<pre><code>npm install axios --save
</code></pre><p>配置加载：</p>
<pre><code>import axios from &apos;axios&apos;

axios.defaults.timeout = 5000  //超时时间
axios.defaults.baseURL = &apos;http://localhost:8082&apos;  //域名
</code></pre><p>然后为了操作方便，进行一下赋值：</p>
<pre><code>Vue.prototype.$http = axios
</code></pre><p>这样就可以用:</p>
<pre><code>this.$http.get(....)这种方式进行异步操作
</code></pre><h2 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h2><p>想一想一个普通的网站，比如jsp网站 列表页–&gt;详细页，中间通过request传值，单更多的信息是存储在一个公共的区域内，比如缓存，比如数据库等，那么vue中如何做呢？</p>
<p>vue也很体贴的准备了一个状态管理的软件，你可以把他想象成前端的缓存，数据库，或者什么都行，只要知道他是存储一下公共状态信息的东东就可以了。</p>
<p>继续完成vuex的安装：</p>
<pre><code>npm install vuex --save
</code></pre><p>然后在项目中进行注册:</p>
<pre><code>import Vuex from &apos;vuex&apos;
Vue.use(Vuex)
</code></pre><p>同样需要设置应该vuex的配置文件：</p>
<pre><code>import store from &apos;./store&apos;
</code></pre><p>然后进入store中index.js的代码：</p>
<pre><code>const state = {

}

export default new Vuex.Store({
    state
})
</code></pre><p>至此，前端框架目前可预见的架构已经搭建完成，接下就进行代码开发，但是在开发之前我们先回到后端。</p>
<h2 id="数据模型的修改"><a href="#数据模型的修改" class="headerlink" title="数据模型的修改"></a>数据模型的修改</h2><p>根据原型：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/6290181-fa15923de889f31a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="数据原型"></p>
<p>我们可以看到原来设计的数据模型已经完全不符合要求了，所以我们要对数据模型进行修改。</p>
<p>由图一的用户认证功能可知，用户模型至少需要用户名和密码，并且我们从电影中可以看到，分男版和女版的样式，所以至少需要性别，而且在电影中还有头像等信息，所以还需要头像，但是这些信息与登录无关，所以为了管理的便利性和登录的性能，我们创建两个模型，User和UserMessage，下面是代码：</p>
<p>User:</p>
<pre><code>@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)//表示db中id的生成方式
private Integer Id;
private String name;
private String password;
private String passwordSalt;
private Date createTime;

//get...set...
</code></pre><p>UserMessage</p>
<pre><code>@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer id;
private int userId;          //User表的id
private String nickname;  //昵称
private String motto=&quot;&quot;;  //格言 座右铭
private int sex=1;  //1 男 0女
</code></pre><p>由电影内部可知，记录项是分组的，比如影片内的禁止事项，日记等分组，所以我们先创建一个记录分组模型：</p>
<p>TodoGroup</p>
<pre><code>@Entity(name = &quot;todogroups&quot;)
public class TodoGroup {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    private String groupName;
    //1 带删除线 0 不带
    private Integer del;
    ////1 此项目组样式，暂时没有 都默认为0
    private Integer style; 
    private Integer userId;   //此项目组所属用户
    private Integer isDefault;//是否为默认组(默认日记为默认组)
    private String icon;      //此项目组的图标
    private Date createtime;  //创建时间
    //getter setter
}
</code></pre><p>从图二图三可知，现有的todo模型内的数据线远远不够，经过考虑，可知一个记录项内所需数据应该有 标题，内容，发表时间，心情，发表地点，天气等，经过修改，新数据模型如下：  </p>
<p>Todo</p>
<pre><code>@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer id;
private String item;      //标题
private Date createTime=new Date(); //创建时间
private Integer userId;                //记录用户
private String content;                //内容
private Integer groupId;            //所属组
private Integer weather;            //天气图标
private String weatherContent;        //天气内容
private Integer mood;                //心情
private Integer bookmark;            //是否标记
private String address;                //发布地点
private double lng;                    //地点坐标
private double lat;                    //地点坐标
</code></pre><p>同时，还需要一个用于记录组织的tag模型,tag模型就比较简单了，只记录内容即可：</p>
<pre><code>@Entity(name = &quot;tags&quot;)
public class Tag {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    private String tagName;
    private Integer userid;
    private Integer tagCount;
}
</code></pre><blockquote>
<p>tag与todo关联模型略</p>
</blockquote>
<p><strong>请自行根据模型修改DB</strong></p>
<p>然后根据模型设计持久层的数据库访问类，这时候就提现出jpa的好处来了，模型修改后，持久层几乎不用做任何修改，仅仅添加几个类即可。</p>
<p>最终持久层目录及模型层目录如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/6290181-3cd3fbe63bbf4d69.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>至此，后端的模型修改完毕，之后将进行前后端同步开发，通过webapi的方式进行数据交互。</p>
<p>谢谢观看。</p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2018/01/03/如果你想开发一个应用-1-13/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2018/01/03/如果你想开发一个应用-1-13/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2018总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
